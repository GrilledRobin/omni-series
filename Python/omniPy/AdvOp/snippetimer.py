#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import time
from contextlib import contextmanager
from typing import Any

@contextmanager
def snippetimer(desc : str = 'The snippet in selection') -> Any:
    #000. Info.
    '''
#---------------------------------------------------------------------------------------------------------------------------------------#
#100.   Introduction.                                                                                                                   #
#---------------------------------------------------------------------------------------------------------------------------------------#
#   |This function is intended to time the enclosed snippet of programs in nanosecond, useful for evaluating the performance of a       #
#   | selection of code snippet, esp. part of code inside the body of a function                                                        #
#---------------------------------------------------------------------------------------------------------------------------------------#
#200.   Glossary.                                                                                                                       #
#---------------------------------------------------------------------------------------------------------------------------------------#
#   |100.   Parameters.                                                                                                                 #
#   |-----------------------------------------------------------------------------------------------------------------------------------#
#   |desc              :   <str     > Head of the message for the timing result                                                         #
#   |-----------------------------------------------------------------------------------------------------------------------------------#
#   |900.   Return Values by position.                                                                                                  #
#   |-----------------------------------------------------------------------------------------------------------------------------------#
#   |<any>             :   It only yields the result as a context manager                                                               #
#---------------------------------------------------------------------------------------------------------------------------------------#
#300.   Update log.                                                                                                                     #
#---------------------------------------------------------------------------------------------------------------------------------------#
#   | Date |    20250330        | Version | 1.00        | Updater/Creator | Lu Robin Bin                                                #
#   |______|____________________|_________|_____________|_________________|_____________________________________________________________#
#   | Log  |Version 1.                                                                                                                  #
#   |______|____________________________________________________________________________________________________________________________#
#---------------------------------------------------------------------------------------------------------------------------------------#
#400.   User Manual.                                                                                                                    #
#---------------------------------------------------------------------------------------------------------------------------------------#
#   |See the [Full Test Program] section                                                                                                #
#---------------------------------------------------------------------------------------------------------------------------------------#
#500.   Dependent Facilities.                                                                                                           #
#---------------------------------------------------------------------------------------------------------------------------------------#
#   |100.   Dependent Modules                                                                                                           #
#   |-----------------------------------------------------------------------------------------------------------------------------------#
#   |   |time, contextlib, typing                                                                                                       #
#   |-----------------------------------------------------------------------------------------------------------------------------------#
#   |300.   Dependent user-defined functions                                                                                            #
#   |-----------------------------------------------------------------------------------------------------------------------------------#
#---------------------------------------------------------------------------------------------------------------------------------------#
    '''

    t_bgn = time.perf_counter_ns()
    result = None
    try:
        yield result
    finally:
        t_end = time.perf_counter_ns()
        t_elapsed = t_end - t_bgn
        print(f'{desc} elapsed {t_elapsed} ns, or {(t_elapsed/1000000):.4f} ms')
#End snippetimer

'''
#-Notes- -Begin-
#Full Test Program[1]:
if __name__=='__main__':
    #010. Create envionment.
    import sys
    dir_omniPy : str = r'D:\Python\ '.strip()
    if dir_omniPy not in sys.path:
        sys.path.append( dir_omniPy )
    from omniPy.AdvOp import snippetimer

    #100. Time a snippet of program
    with snippetimer('Sort 100K integers'):
        _ = sorted([5,3,1,4,2] * 100000)
    # Sort 100K integers elapsed 12116300 ns, or 12.1163 ms

#-Notes- -End-
'''
